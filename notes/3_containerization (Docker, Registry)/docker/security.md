### Безопасность в Docker — это не одна «галочка», а комплекс мер на всех уровнях: от написания кода до настройки сервера. Контейнеры изолированы, но по умолчанию эта изоляция не абсолютна.

1. Создавать непривилигированного пользователя и переключаться на него в dockerfile:
RUN useradd -m myuser
USER myuser


2. Сканирование образов на уязвимости, инструменты:
docker scan [image] (встроенная проверка).
Trivy или Clair — популярные сканеры для CI/CD.


3. Ограничение ресурсов (DoS-защита):
Использовать флаги --memory="512m" и --cpus="1" при запуске или лимиты в Docker Compose.


4. Работа с секретами (Secrets):
Никогда не зашивать пароли, API-ключи и сертификаты в Dockerfile или переменные окружения (ENV). Они сохраняются в истории образа и видны через docker inspect.
Решение:
Используйте файлы .env (не добавляя их в Git).
В Docker Compose используйте секцию secrets.
В продакшене — внешние хранилища вроде HashiCorp Vault.


5. Сетевая изоляция
Не публиковать порты (-p), если в этом нет необходимости.
Пример: База данных должна быть доступна бэкенду внутри приватной сети Docker, но её нельзя выставлять наружу на порт 5432 вашего сервера.


6. Read-Only файловая система
Если приложению не нужно ничего записывать на диск (кроме логов), запустите его в режиме «только для чтения». Это не даст хакеру подложить вредоносный скрипт.
Флаг: docker run --read-only ...