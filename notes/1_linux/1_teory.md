Основные конфигурационные файлы:

/etc/apt/sources.list  - Смена зеркал
/etc/network/interfaces  - Сетевые интерфейсы
/etc/resolv.conf - DNS
/etc/sudoers - Права пользователей к sudo
/etc/hostname - Имя хоста в сети
/etc/default - Настройки по умолчанию




## 1. Философия Linux

### Основные принципы Unix-философии:

1. "Всё есть файл" - даже устройства, процессы, сокеты представлены как файлы
2. Одна программа - одна задача - программы должны делать одно, но хорошо
3. Комбинируемость - вывод одной программы может быть входом для другой
4. Текстовые интерфейсы - предпочтение тексту, а не GUI
5. Прозрачность - конфиги в читаемом текстовом формате

### Почему Linux для DevOps?
- Open Source - можно посмотреть и изменить любой код
- Стабильность - годами работает без перезагрузок
- Гибкость - можно собрать систему под любые задачи
- Автоматизация - всё управляется через CLI и скрипты
- Контейнеры - Docker и Kubernetes построены на возможностях Linux






## 2. Архитектура системы

┌───────────────────────────────────────────────────────┐
│ Пользовательские приложения │ ← bash, nginx, docker
├───────────────────────────────────────────────────────┤
│ System Libraries            │ ← glibc, openssl
├───────────────────────────────────────────────────────┤
│ System Call Interface       │ ← syscalls (open, read, write)
├───────────────────────────────────────────────────────┤
│ Kernel                      │ ← ядро (сердце системы)
├───────────────────────────────────────────────────────┤
│ Hardware (CPU, RAM, Disk)   │ ← железо
└───────────────────────────────────────────────────────┘


### Userspace vs Kernelspace

| Пространство     | Что там                | Доступ                               |
|------------------|------------------------|--------------------------------------|
| **Kernel space** | Ядро, драйверы         | Полный доступ к железу               |
| **User space**   | Приложения, библиотеки | Ограниченный доступ (через syscalls) |


### System Calls (Системные вызовы)
Мост между пользовательскими программами и ядром. Примеры:
- `read()` - чтение из файла
- `write()` - запись в файл
- `fork()` - создание нового процесса
- `exec()` - запуск программы
- `socket()` - создание сетевого сокета


Посмотреть системные вызовы процесса:
```bash
strace -p PID          # Трассировка процессов
strace ls              # Посмотреть вызовы для ls
```





### 3. Ядро Linux

Что делает ядро?
Управление процессами (CPU scheduling)

Управление памятью (virtual memory, paging)

Управление устройствами (драйверы)

Файловые системы (VFS - Virtual File System)

Сетевой стек (TCP/IP, netfilter)



## Версии ядра

6.1.25-gentoo
│ │ │
│ │ └── patch level (исправления)
│ └── major version (основная версия)
└── kernel version (версия ядра)


## Модули ядра

Динамически загружаемые части ядра:

lsmod                   # Список загруженных модулей
modprobe module_name    # Загрузить модуль
modinfo module_name     # Информация о модул









### 4. Файловая система

FHS (Filesystem Hierarchy Standard)

/ (root)
├── bin  → /usr/bin        # Базовые команды (ls, cp, mv)
├── boot                   # Загрузчик, ядро
├── dev                    # Устройства (sda, tty, null)
├── etc                    # Конфигурационные файлы
├── home                   # Домашние папки пользователей
├── lib  → /usr/lib        # Системные библиотеки
├── media                  # Точки монтирования сменных носителей
├── mnt                    # Временные точки монтирования
├── opt                    # Дополнительное ПО
├── proc                   # Виртуальная ФС с информацией о процессах
├── root                   # Домашняя папка root
├── run                    # Данные о запущенных процессах
├── sbin → /usr/sbin       # Системные команды
├── srv                    # Данные сервисов
├── sys                    # Виртуальная ФС с информацией о системе
├── tmp                    # Временные файлы
├── usr                    # Пользовательские программы
│   ├── bin
│   ├── lib
│   └── local              # ПО, установленное вручную
└── var                    # Изменяемые данные (логи, кэш)
    ├── log
    ├── cache
    └── lib



## Типы файлов в Linux

    Тип	                  Обозначение      Пример
Обычный файл	          -              -rw-r--r--
Директория                d              drwxr-xr-x
Символическая ссылка	  l              lrwxrwxrwx
Устройство (блочное)	  b              brw-rw----
Устройство (символьное)   c              crw-rw----
Сокет	                  s              srwxrwxrwx
Pipe (FIFO)	              p              prw-r--r--




## inode (Index Node)

Каждый файл имеет inode - структуру с метаданными:

- Права доступа
- Владелец и группа
- Размер
- Временные метки (atime, ctime, mtime)
- Количество ссылок
- Указатели на блоки данных

ls -i file              # Показать inode файла
stat file               # Детальная информация о файле
df -i                   # Информация об inode на ФС

# Жесткая ссылка (один inode, два имени)
ln target link_name
ls -li                  # Одинаковый inode

# Символическая ссылка (отдельный файл, указывает на путь)
ln -s target symlink_name
ls -l                   # Видно куда указывает

Различия:

Жесткая - нельзя на директории, нельзя между ФС
Символическая - можно на всё, если удалить оригинал - ссылка сломается









### 5. Процессы и управление ими
Типы процессов

Тип	                  Описание                   Пример

Foreground         Занимает терминал              nginx
Background         Работает в фоне                nginx &
Daemon             Системные сервисы              systemd, sshd
Zombie             Завершен, но ждет родителя     <defunct>
Orphan             Родитель умер, усыновлен init


## Структура процесса
Каждый процесс имеет:

- PID (Process ID) - уникальный номер
- PPID (Parent PID) - родительский процесс
- UID/EUID - реальный/эффективный пользователь
- GID/EGID - реальная/эффективная группа
- Nice level - приоритет
- Состояние (R, S, D, Z, T)

## Состояния процессов (ps state)

R	(Running)    Выполняется или в очереди
S	(Sleeping)    Ожидает события (прерываемый)
D	(Uninterruptible sleep)    Ожидает ввода-вывода (нельзя прервать)
Z	(Zombie)    Завершен, ждет родителя
T	(Stopped)    Приостановлен (Ctrl+Z)


### Приоритеты процессов (Nice)
Диапазон: от -20 (высокий приоритет) до 19 (низкий)

bash
nice -n 10 command      # Запустить с nice 10
renice -n 5 -p PID      # Изменить приоритет
top                     # Посмотреть NI и PR колонки